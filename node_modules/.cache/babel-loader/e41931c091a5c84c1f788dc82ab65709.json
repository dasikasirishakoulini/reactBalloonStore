{"ast":null,"code":"import _toConsumableArray from\"/Users/sirishadasika/Desktop/balloon/Balloons-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/sirishadasika/Desktop/balloon/Balloons-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useCallback,useEffect,useState}from'react';import useLocalStorage from'@shared/hooks/useLocalStorage';import{updateQuantity}from'./utils';import{jsx as _jsx}from\"react/jsx-runtime\";export var CartContext=/*#__PURE__*/React.createContext({add:function add(){return null;},remove:function remove(){return null;},balloons:[],isInCart:function isInCart(){return false;},toggle:function toggle(){return null;},addQuantity:function addQuantity(){return null;},subtractQuantity:function subtractQuantity(){return null;}});export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useLocalStorage=useLocalStorage('cart',[]),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),_useLocalStorage2$=_useLocalStorage2[0],cart=_useLocalStorage2$===void 0?[]:_useLocalStorage2$,setCart=_useLocalStorage2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),balloons=_useState2[0],setBalloons=_useState2[1];var add=useCallback(function(balloon){!isInCart(balloon.id)?setBalloons(function(v){return[{balloon:balloon,count:1}].concat(_toConsumableArray(v));}):addQuantity(balloon.id);},[balloons]);var isInCart=useCallback(function(id){return!!balloons.find(function(balloonWithQuantity){return balloonWithQuantity.balloon.id===id;});},[balloons]);var toggle=useCallback(function(balloon){isInCart(balloon.id)?remove(balloon.id):add(balloon);},[balloons]);var remove=useCallback(function(id){setBalloons(function(v){return v.filter(function(balloonWithQuantity){return balloonWithQuantity.balloon.id!==id;});});},[balloons]);var addQuantity=useCallback(function(id){setBalloons(updateQuantity(balloons,id,1));},[balloons]);var subtractQuantity=useCallback(function(id){setBalloons(updateQuantity(balloons,id,-1).filter(function(balloonWithQuantity){return balloonWithQuantity.count>0;}));},[balloons]);// Load initial local storage values\nuseEffect(function(){setBalloons(cart);},[]);// Update local storage on every balloons change\nuseEffect(function(){setCart(balloons);},[balloons]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{add:add,remove:remove,balloons:balloons,isInCart:isInCart,toggle:toggle,subtractQuantity:subtractQuantity,addQuantity:addQuantity},children:children});};","map":{"version":3,"sources":["/Users/sirishadasika/Desktop/balloon/Balloons-Store/src/shared/cart/CartContext.tsx"],"names":["React","useCallback","useEffect","useState","useLocalStorage","updateQuantity","CartContext","createContext","add","remove","balloons","isInCart","toggle","addQuantity","subtractQuantity","CartProvider","children","cart","setCart","setBalloons","balloon","id","v","count","find","balloonWithQuantity","filter"],"mappings":"4VAAA,gDACA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,QAAxC,KAAwD,OAAxD,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,OAASC,cAAT,KAA+B,SAA/B,C,2CAYA,MAAO,IAAMC,CAAAA,WAAW,cAAGN,KAAK,CAACO,aAAN,CAAkC,CAC3DC,GAAG,CAAE,qBAAM,KAAN,EADsD,CAE3DC,MAAM,CAAE,wBAAM,KAAN,EAFmD,CAG3DC,QAAQ,CAAE,EAHiD,CAI3DC,QAAQ,CAAE,0BAAM,MAAN,EAJiD,CAK3DC,MAAM,CAAE,wBAAM,KAAN,EALmD,CAM3DC,WAAW,CAAE,6BAAM,KAAN,EAN8C,CAO3DC,gBAAgB,CAAE,kCAAM,KAAN,EAPyC,CAAlC,CAApB,CAcP,MAAO,IAAMC,CAAAA,YAA4D,CAAG,QAA/DA,CAAAA,YAA+D,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,sBAC/DZ,eAAe,CAAC,MAAD,CAAS,EAAT,CADgD,8FACrFa,IADqF,6BAC9E,EAD8E,oBAC1EC,OAD0E,oCAE5Df,QAAQ,CAAwB,EAAxB,CAFoD,wCAErFO,QAFqF,eAE3ES,WAF2E,eAI5F,GAAMX,CAAAA,GAAG,CAAGP,WAAW,CACrB,SAACmB,OAAD,CAAsB,CACpB,CAACT,QAAQ,CAACS,OAAO,CAACC,EAAT,CAAT,CACIF,WAAW,CAAC,SAAAG,CAAC,SAAK,CAAEF,OAAO,CAAPA,OAAF,CAAWG,KAAK,CAAE,CAAlB,CAAL,4BAA+BD,CAA/B,IAAF,CADf,CAEIT,WAAW,CAACO,OAAO,CAACC,EAAT,CAFf,CAGD,CALoB,CAMrB,CAACX,QAAD,CANqB,CAAvB,CASA,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,CAC1B,SAACoB,EAAD,CAAgB,CACd,MAAO,CAAC,CAACX,QAAQ,CAACc,IAAT,CACP,SAACC,mBAAD,QAA8CA,CAAAA,mBAAmB,CAACL,OAApB,CAA4BC,EAA5B,GAAmCA,EAAjF,EADO,CAAT,CAGD,CALyB,CAM1B,CAACX,QAAD,CAN0B,CAA5B,CASA,GAAME,CAAAA,MAAM,CAAGX,WAAW,CACxB,SAACmB,OAAD,CAAsB,CACpBT,QAAQ,CAACS,OAAO,CAACC,EAAT,CAAR,CAAuBZ,MAAM,CAACW,OAAO,CAACC,EAAT,CAA7B,CAA4Cb,GAAG,CAACY,OAAD,CAA/C,CACD,CAHuB,CAIxB,CAACV,QAAD,CAJwB,CAA1B,CAOA,GAAMD,CAAAA,MAAM,CAAGR,WAAW,CACxB,SAACoB,EAAD,CAAgB,CACdF,WAAW,CAAC,SAAAG,CAAC,QAAIA,CAAAA,CAAC,CAACI,MAAF,CAAS,SAAAD,mBAAmB,QAAIA,CAAAA,mBAAmB,CAACL,OAApB,CAA4BC,EAA5B,GAAmCA,EAAvC,EAA5B,CAAJ,EAAF,CAAX,CACD,CAHuB,CAIxB,CAACX,QAAD,CAJwB,CAA1B,CAOA,GAAMG,CAAAA,WAAW,CAAGZ,WAAW,CAC7B,SAACoB,EAAD,CAAgB,CACdF,WAAW,CAACd,cAAc,CAACK,QAAD,CAAWW,EAAX,CAAe,CAAf,CAAf,CAAX,CACD,CAH4B,CAI7B,CAACX,QAAD,CAJ6B,CAA/B,CAOA,GAAMI,CAAAA,gBAAgB,CAAGb,WAAW,CAClC,SAACoB,EAAD,CAAgB,CACdF,WAAW,CACTd,cAAc,CAACK,QAAD,CAAWW,EAAX,CAAe,CAAC,CAAhB,CAAd,CAAiCK,MAAjC,CACE,SAACD,mBAAD,QAA8CA,CAAAA,mBAAmB,CAACF,KAApB,CAA4B,CAA1E,EADF,CADS,CAAX,CAKD,CAPiC,CAQlC,CAACb,QAAD,CARkC,CAApC,CAWA;AACAR,SAAS,CAAC,UAAM,CACdiB,WAAW,CAACF,IAAD,CAAX,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA;AACAf,SAAS,CAAC,UAAM,CACdgB,OAAO,CAACR,QAAD,CAAP,CACD,CAFQ,CAEN,CAACA,QAAD,CAFM,CAAT,CAIA,mBACE,KAAC,WAAD,CAAa,QAAb,EACE,KAAK,CAAE,CAAEF,GAAG,CAAHA,GAAF,CAAOC,MAAM,CAANA,MAAP,CAAeC,QAAQ,CAARA,QAAf,CAAyBC,QAAQ,CAARA,QAAzB,CAAmCC,MAAM,CAANA,MAAnC,CAA2CE,gBAAgB,CAAhBA,gBAA3C,CAA6DD,WAAW,CAAXA,WAA7D,CADT,UAGGG,QAHH,EADF,CAOD,CAvEM","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useCallback, useEffect, useState } from 'react';\nimport useLocalStorage from '@shared/hooks/useLocalStorage';\nimport { updateQuantity } from './utils';\n\ntype ContextProps = {\n  add: (_: Balloon) => void;\n  toggle: (_: Balloon) => void;\n  remove: (_: string) => void;\n  balloons: BalloonWithQuantity[];\n  isInCart: (_: string) => boolean;\n  addQuantity: (_: string) => void;\n  subtractQuantity: (_: string) => void;\n};\n\nexport const CartContext = React.createContext<ContextProps>({\n  add: () => null,\n  remove: () => null,\n  balloons: [],\n  isInCart: () => false,\n  toggle: () => null,\n  addQuantity: () => null,\n  subtractQuantity: () => null,\n});\n\ninterface DropDownMenuInterface {\n  children: React.ReactNode;\n}\n\nexport const CartProvider: React.FunctionComponent<DropDownMenuInterface> = ({ children }) => {\n  const [cart = [], setCart] = useLocalStorage('cart', []);\n  const [balloons, setBalloons] = useState<BalloonWithQuantity[]>([]);\n\n  const add = useCallback(\n    (balloon: Balloon) => {\n      !isInCart(balloon.id)\n        ? setBalloons(v => [{ balloon, count: 1 }, ...v])\n        : addQuantity(balloon.id);\n    },\n    [balloons],\n  );\n\n  const isInCart = useCallback(\n    (id: string) => {\n      return !!balloons.find(\n        (balloonWithQuantity: BalloonWithQuantity) => balloonWithQuantity.balloon.id === id,\n      );\n    },\n    [balloons],\n  );\n\n  const toggle = useCallback(\n    (balloon: Balloon) => {\n      isInCart(balloon.id) ? remove(balloon.id) : add(balloon);\n    },\n    [balloons],\n  );\n\n  const remove = useCallback(\n    (id: string) => {\n      setBalloons(v => v.filter(balloonWithQuantity => balloonWithQuantity.balloon.id !== id));\n    },\n    [balloons],\n  );\n\n  const addQuantity = useCallback(\n    (id: string) => {\n      setBalloons(updateQuantity(balloons, id, 1));\n    },\n    [balloons],\n  );\n\n  const subtractQuantity = useCallback(\n    (id: string) => {\n      setBalloons(\n        updateQuantity(balloons, id, -1).filter(\n          (balloonWithQuantity: BalloonWithQuantity) => balloonWithQuantity.count > 0,\n        ),\n      );\n    },\n    [balloons],\n  );\n\n  // Load initial local storage values\n  useEffect(() => {\n    setBalloons(cart);\n  }, []);\n\n  // Update local storage on every balloons change\n  useEffect(() => {\n    setCart(balloons as []);\n  }, [balloons]);\n\n  return (\n    <CartContext.Provider\n      value={{ add, remove, balloons, isInCart, toggle, subtractQuantity, addQuantity }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}