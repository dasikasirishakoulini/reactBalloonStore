{"ast":null,"code":"import _objectSpread from\"/Users/sirishadasika/Desktop/balloon/Balloons-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sirishadasika/Desktop/balloon/Balloons-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import{useQuery}from'urql';import{get}from'lodash';import{GET_BALLOONS}from'@graphql/queries';import usePagination from'@pages/Dashboard/components/BalloonsList/usePagination';import{useEffect}from'react';var useBalloons=function useBalloons(filters){var _usePagination=usePagination(),onResponse=_usePagination.onResponse,nextPage=_usePagination.nextPage,reset=_usePagination.reset,paginationVars=_usePagination.paginationVars;var _useQuery=useQuery({query:GET_BALLOONS,variables:_objectSpread(_objectSpread({},paginationVars),{},{filter:_objectSpread(_objectSpread({},filters.variant?{variant:filters.variant}:{}),filters.color?{color:filters.color}:{})},filters.sort?{sort:filters.sort}:{})}),_useQuery2=_slicedToArray(_useQuery,1),_useQuery2$=_useQuery2[0],data=_useQuery2$.data,fetching=_useQuery2$.fetching,error=_useQuery2$.error;useEffect(function(){reset();},[filters]);useEffect(function(){var _data$balloons;(data===null||data===void 0?void 0:data.balloons)&&onResponse(data===null||data===void 0?void 0:(_data$balloons=data.balloons)===null||_data$balloons===void 0?void 0:_data$balloons.pageInfo);},[data===null||data===void 0?void 0:data.balloons]);var balloonsEdges=get(data,'balloons.edges',[]);var hasNextPage=get(data,'balloons.pageInfo.hasNextPage',false);var balloons=balloonsEdges.map(function(balloonEdge){return balloonEdge.node;});return{balloons:balloons,fetching:fetching,error:error,hasNextPage:hasNextPage,nextPage:nextPage};};export default useBalloons;","map":{"version":3,"sources":["/Users/sirishadasika/Desktop/balloon/Balloons-Store/src/pages/Dashboard/components/BalloonsList/useBalloons.ts"],"names":["useQuery","get","GET_BALLOONS","usePagination","useEffect","useBalloons","filters","onResponse","nextPage","reset","paginationVars","query","variables","filter","variant","color","sort","data","fetching","error","balloons","pageInfo","balloonsEdges","hasNextPage","map","balloonEdge","node"],"mappings":"mVAAA,gDACA,OAASA,QAAT,KAAwC,MAAxC,CACA,OAASC,GAAT,KAAoB,QAApB,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,MAAOC,CAAAA,aAAP,KAA0B,wDAA1B,CACA,OAASC,SAAT,KAA0B,OAA1B,CAUA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,OAAD,CAAoC,oBACEH,aAAa,EADf,CAC9CI,UAD8C,gBAC9CA,UAD8C,CAClCC,QADkC,gBAClCA,QADkC,CACxBC,KADwB,gBACxBA,KADwB,CACjBC,cADiB,gBACjBA,cADiB,eAElBV,QAAQ,CAAC,CAC3CW,KAAK,CAAET,YADoC,CAE3CU,SAAS,gCACJF,cADI,MAEPG,MAAM,gCACAP,OAAO,CAACQ,OAAR,CAAkB,CAAEA,OAAO,CAAER,OAAO,CAACQ,OAAnB,CAAlB,CAAiD,EADjD,EAEAR,OAAO,CAACS,KAAR,CAAgB,CAAEA,KAAK,CAAET,OAAO,CAACS,KAAjB,CAAhB,CAA2C,EAF3C,CAFC,EAMHT,OAAO,CAACU,IAAR,CAAe,CAAEA,IAAI,CAAEV,OAAO,CAACU,IAAhB,CAAf,CAAwC,EANrC,CAFkC,CAAD,CAFU,kEAE7CC,IAF6C,aAE7CA,IAF6C,CAEvCC,QAFuC,aAEvCA,QAFuC,CAE7BC,KAF6B,aAE7BA,KAF6B,CActDf,SAAS,CAAC,UAAM,CACdK,KAAK,GACN,CAFQ,CAEN,CAACH,OAAD,CAFM,CAAT,CAIAF,SAAS,CAAC,UAAM,oBACd,CAAAa,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEG,QAAN,GAAkBb,UAAU,CAACU,IAAD,SAACA,IAAD,iCAACA,IAAI,CAAEG,QAAP,yCAAC,eAAgBC,QAAjB,CAA5B,CACD,CAFQ,CAEN,CAACJ,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEG,QAAP,CAFM,CAAT,CAIA,GAAME,CAAAA,aAAa,CAAGrB,GAAG,CAACgB,IAAD,CAAO,gBAAP,CAAyB,EAAzB,CAAzB,CACA,GAAMM,CAAAA,WAAW,CAAGtB,GAAG,CAACgB,IAAD,CAAO,+BAAP,CAAwC,KAAxC,CAAvB,CAEA,GAAMG,CAAAA,QAAQ,CAAGE,aAAa,CAACE,GAAd,CAAkB,SAACC,WAAD,QAA8BA,CAAAA,WAAW,CAACC,IAA1C,EAAlB,CAAjB,CAEA,MAAO,CACLN,QAAQ,CAARA,QADK,CAELF,QAAQ,CAARA,QAFK,CAGLC,KAAK,CAALA,KAHK,CAILI,WAAW,CAAXA,WAJK,CAKLf,QAAQ,CAARA,QALK,CAAP,CAOD,CAlCD,CAoCA,cAAeH,CAAAA,WAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useQuery, CombinedError } from 'urql';\nimport { get } from 'lodash';\nimport { GET_BALLOONS } from '@graphql/queries';\nimport usePagination from '@pages/Dashboard/components/BalloonsList/usePagination';\nimport { useEffect } from 'react';\n\ninterface BalloonsHook {\n  balloons: Balloon[];\n  fetching: boolean;\n  error?: CombinedError;\n  hasNextPage: boolean;\n  nextPage: () => void;\n}\n\nconst useBalloons = (filters: Filters): BalloonsHook => {\n  const { onResponse, nextPage, reset, paginationVars } = usePagination();\n  const [{ data, fetching, error }] = useQuery({\n    query: GET_BALLOONS,\n    variables: {\n      ...paginationVars,\n      filter: {\n        ...(filters.variant ? { variant: filters.variant } : {}),\n        ...(filters.color ? { color: filters.color } : {}),\n      },\n      ...(filters.sort ? { sort: filters.sort } : {}),\n    },\n  });\n\n  useEffect(() => {\n    reset();\n  }, [filters]);\n\n  useEffect(() => {\n    data?.balloons && onResponse(data?.balloons?.pageInfo);\n  }, [data?.balloons]);\n\n  const balloonsEdges = get(data, 'balloons.edges', []);\n  const hasNextPage = get(data, 'balloons.pageInfo.hasNextPage', false);\n\n  const balloons = balloonsEdges.map((balloonEdge: BalloonEdge) => balloonEdge.node);\n\n  return {\n    balloons,\n    fetching,\n    error,\n    hasNextPage,\n    nextPage,\n  };\n};\n\nexport default useBalloons;\n"]},"metadata":{},"sourceType":"module"}